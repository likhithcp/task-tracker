/* =======================
   GLOBAL / THEME
   ======================= */

:host {
  display: block;
  min-height: 100dvh;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
    "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color: #0f172a;
}

/* topbar */
.topbar {
  position: fixed;
  inset: 12px 12px auto auto;
  z-index: 30;
}
.toggle {
  padding: 0.55rem 0.9rem;
  border: none;
  border-radius: 999px;
  cursor: pointer;
  font-weight: 700;
  background: #0f172a;
  color: #fff;
  box-shadow: 0 10px 20px rgba(2, 6, 23, 0.2);
}
.scene.dark ~ .topbar .toggle {
  background: #fff;
  color: #0f172a;
}

/* =======================
   COSMIC BACKDROP LAYERS
   Everything is position:fixed with negative z-index so it never blocks clicks
   ======================= */

.scene {
  position: fixed;
  inset: 0;
  z-index: -10;
  overflow: hidden;
}

/* galaxy gradient base */
.galaxy {
  position: absolute;
  inset: 0;
  background: radial-gradient(1200px 700px at 20% -10%, #1b1f3a 0%, #0e132a 35%, #060815 100%);
}
.scene.dark .galaxy {
  background: radial-gradient(1200px 700px at 20% -10%, #050714 0%, #040510 40%, #01020a 100%);
}

/* colored aurora */
.aurora {
  position: absolute;
  inset: -20% -10% auto -10%;
  height: 70%;
  background:
    radial-gradient(60% 80% at 30% 30%, rgba(111, 76, 255, 0.45), transparent 60%),
    radial-gradient(50% 70% at 60% 20%, rgba(0, 220, 255, 0.35), transparent 60%),
    radial-gradient(60% 60% at 50% 60%, rgba(255, 90, 196, 0.35), transparent 60%);
  filter: blur(50px) saturate(1.1);
  animation: aurora-drift 30s ease-in-out infinite alternate;
  pointer-events: none;
}
@keyframes aurora-drift {
  0%   { transform: translateY(0) translateX(0) scale(1); }
  100% { transform: translateY(30px) translateX(20px) scale(1.05); }
}

/* twinkling stars: use repeating radial-gradients for thousands of dots */
.stars {
  position: absolute;
  inset: 0;
  background-image:
    radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,.9) 50%, transparent 51%),
    radial-gradient(1px 1px at 70% 40%, rgba(255,255,255,.8) 50%, transparent 51%),
    radial-gradient(1px 1px at 40% 80%, rgba(255,255,255,.7) 50%, transparent 51%),
    radial-gradient(1px 1px at 10% 60%, rgba(255,255,255,.7) 50%, transparent 51%),
    radial-gradient(1px 1px at 90% 20%, rgba(255,255,255,.8) 50%, transparent 51%);
  background-repeat: repeat;
  background-size: 300px 300px;
  animation: twinkle 4s ease-in-out infinite;
  opacity: 0.8;
  filter: drop-shadow(0 0 2px rgba(255,255,255,.3));
  pointer-events: none;
}
.layer2 {
  background-size: 240px 240px;
  animation-duration: 6s;
  opacity: 0.6;
}
.layer3 {
  background-size: 180px 180px;
  animation-duration: 8s;
  opacity: 0.45;
}
@keyframes twinkle {
  0%, 100% { opacity: .4; }
  50%      { opacity: .9; }
}



/* slow floating particles */
.particles {
  position: absolute; inset: 0;
  background:
    radial-gradient(2px 2px at 10% 90%, rgba(255,255,255,.25), transparent 40%),
    radial-gradient(2px 2px at 30% 50%, rgba(255,255,255,.2), transparent 40%),
    radial-gradient(2px 2px at 60% 20%, rgba(255,255,255,.18), transparent 40%),
    radial-gradient(2px 2px at 80% 70%, rgba(255,255,255,.2), transparent 40%);
  animation: float-particles 18s linear infinite;
  pointer-events: none;
  opacity: .5;
}
@keyframes float-particles {
  from { transform: translateY(0); }
  to   { transform: translateY(-80px); }
}

/* clouds */
.clouds { position: absolute; inset: 0; pointer-events: none; }
.cloud {
  position: absolute; top: 15%; left: -30%;
  width: 240px; height: 90px; border-radius: 999px;
  background: rgba(255,255,255,.15);
  filter: blur(6px);
  box-shadow:
    40px 10px 0 10px rgba(255,255,255,.15),
    100px 0 0 20px rgba(255,255,255,.12),
    160px 12px 0 14px rgba(255,255,255,.12);
  animation: drift 60s linear infinite;
}
.c2 { top: 28%; animation-duration: 70s; opacity: .6; }
.c3 { top: 40%; animation-duration: 85s; opacity: .45; }
@keyframes drift {
  from { transform: translateX(0); }
  to   { transform: translateX(160%); }
}

/* moon + planets with parallax */
.sky-objects { position: absolute; inset: 0; pointer-events: none; }
.moon {
  position: absolute; top: 8%; right: 10%;
  width: 120px; height: 120px; border-radius: 50%;
  background:
    radial-gradient(60px 60px at 40% 35%, #fff, #d8d8ff 60%, #9aa0ff 100%);
  box-shadow: 0 0 30px rgba(198, 205, 255, 0.6);
  animation: parallax 18s ease-in-out infinite alternate;
}
.planet {
  position: absolute; border-radius: 50%;
  box-shadow: 0 0 24px rgba(255,255,255,.3);
  animation: parallax 24s ease-in-out infinite alternate;
}
.p1 {
  width: 90px; height: 90px; left: 10%; top: 18%;
  background: radial-gradient(circle at 30% 30%, #ffa7ec, #b46cff 70%, #5926ff);
}
.p2 {
  width: 60px; height: 60px; left: 25%; top: 65%;
  background: radial-gradient(circle at 30% 30%, #76f7ff, #25d0ff 70%, #0065ff);
}
@keyframes parallax {
  0%   { transform: translateY(0) translateX(0) }
  100% { transform: translateY(12px) translateX(10px) }
}

/* =======================
   APP CONTENT
   ======================= */

.wrapper {
  max-width: 560px;
  margin: 6rem auto;
  padding: 1.25rem;
}

.card {
  position: relative;
  background: #ffffffcc;
  backdrop-filter: blur(8px);
  border: 1px solid #e5e7eb;
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(2, 6, 23, 0.18);
  padding: 1.25rem;
  overflow: visible;
}

@keyframes tail {
  0%, 100% { transform: rotate(18deg); }
  50%      { transform: rotate(-6deg); }
}

/* header & stats */
.title {
  display: flex; align-items: center; gap: .6rem;
  margin: .25rem 0 1rem; font-weight: 800; letter-spacing: .2px;
}
.title .badge {
  font-size: .8rem; color: #6366f1; background: #eef2ff;
  border: 1px solid #e0e7ff; padding: .15rem .5rem; border-radius: 999px;
}

.controls {
  display: grid; grid-template-columns: 1fr auto; gap: .6rem; margin-bottom: 1rem;
}
input[type="text"], input {
  width: 100%; padding: .8rem .9rem; border: 1px solid #e5e7eb; border-radius: 10px;
  outline: none; font-size: .98rem; transition: border-color .15s, box-shadow .15s;
  background: #fff;
}
input:focus { border-color: #6366f1; box-shadow: 0 0 0 4px #eef2ff; }

.btn { padding: .8rem 1.1rem; border-radius: 10px; cursor: pointer; font-weight: 600;
  border: none; transition: transform .06s, box-shadow .15s, background .15s; }
.btn:active { transform: translateY(1px); }
.btn-primary { background: #6366f1; color: #fff; box-shadow: 0 6px 16px rgba(99,102,241,.3); }
.btn-primary:hover { background: #5558ee; }
.btn-ghost { background: transparent; color: #ef4444; padding: .45rem .6rem; }
.btn-ghost:hover { background: #fef2f2; color: #dc2626; border-radius: 8px; }

.list { list-style: none; margin: 0; padding: 0; }
.item {
  display: flex; align-items: center; justify-content: space-between; gap: .8rem;
  padding: .75rem .8rem; border: 1px solid #eaecef; border-radius: 12px; background: #fff;
  transition: border-color .15s ease, transform .06s ease;
}
.item + .item { margin-top: .6rem; }
.item:hover { border-color: #dbe2ff; }
.item-text { flex: 1; word-break: break-word; }

.empty { text-align: center; color: #6b7280; padding: 1.2rem 0 .6rem; font-size: .95rem; }
.footer { margin-top: .9rem; font-size: .85rem; color: #6b7280;
  display: flex; justify-content: space-between; align-items: center; }

/* responsive */
@media (max-width: 640px) {
  .wrapper { margin: 2rem auto; padding: .8rem; }
  .card { padding: 1rem; }
}

/* dark mode adjustments for content */
.scene.dark ~ .wrapper .card {
  background: rgba(16, 20, 38, 0.6);
  border-color: rgba(255,255,255,0.08);
  color: #e8ecff;
}
.scene.dark ~ .wrapper input {
  background: rgba(255,255,255,0.95);
}

/* accessibility: respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .aurora, .stars, .shooting, .particles, .cloud, .moon, .planet,
  .tail, .eye, .toggle { animation: none !important; }
}
/* ===== DARK THEME ‚Äì HIGH CONTRAST FIX ===== */
.scene.dark ~ .wrapper .card {
  background: rgba(16, 20, 38, 0.85);
  border-color: rgba(255,255,255,0.06);
  color: #eaf0ff; /* main text */
}

.scene.dark ~ .wrapper .title .badge {
  color: #cdd5ff;
  background: rgba(99, 102, 241, 0.15);
  border-color: rgba(99, 102, 241, 0.25);
}

.scene.dark ~ .wrapper input[type="text"],
.scene.dark ~ .wrapper input {
  background: rgba(255, 255, 255, 0.08);
  color: #e9edff;                 /* input text */
  border: 1px solid #2b2f45;
}

.scene.dark ~ .wrapper input::placeholder {
  color: #9aa3c7;                 /* placeholder */
}

.scene.dark ~ .wrapper .item {
  background: rgba(255,255,255,0.06);
  border-color: rgba(255,255,255,0.08);
}

.scene.dark ~ .wrapper .btn-primary {
  background: #7c83ff;
  color: #0b0f2a;
  box-shadow: 0 6px 16px rgba(124,131,255,.35);
}
.scene.dark ~ .wrapper .btn-primary:hover { background: #96a0ff; }

.scene.dark ~ .wrapper .btn-ghost {
  color: #ff8e8e;
}
.scene.dark ~ .wrapper .btn-ghost:hover {
  background: rgba(239,68,68,0.15);
  color: #ffd2d2;
}

.scene.dark ~ .wrapper .empty,
.scene.dark ~ .wrapper .footer { color: #aab4d6; }
/* ===== METEOR (DIAGONAL FALL WITH BRIGHT HEAD + TAIL) ===== */
/* REALISTIC METEOR ‚Äî moves left ‚Üí right, tail points left */
.meteor {
  position: absolute;
  width: 160px;              /* long tail */
  height: 2px;
  top: -80px;                /* starts off-screen */
  left: -200px;

  /* Tail (left) ‚Üí Head (right) */
  background: linear-gradient(
    to right,
    rgba(255,255,255,0) 0%,      /* leftmost tail fade */
    rgba(255,255,255,0.15) 20%,
    rgba(255,255,255,0.6) 55%,
    rgba(255,255,255,0.95) 85%,  /* near head */
    rgba(255,255,255,1) 100%     /* brightest head on right */
  );

  border-radius: 2px;
  transform: rotate(25deg);     /* diagonal fall */
  filter: drop-shadow(-4px 0px 12px rgba(255,255,255,0.5));
  animation: meteor-move 3.5s linear infinite;
  pointer-events: none;
}

/* Bright head (glowing sphere) */
.meteor::after {
  content: "";
  position: absolute;
  right: -4px;                 /* head on right side */
  top: -6px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: radial-gradient(circle,
    rgba(255,255,255,1) 0%,
    rgba(255,255,255,0.9) 40%,
    rgba(180,200,255,0.7) 70%,
    rgba(255,255,255,0) 90%
  );
  filter:
    drop-shadow(0 0 16px rgba(255,255,255,1))
    drop-shadow(0 0 28px rgba(150,180,255,0.8));
}

/* Motion path */
@keyframes meteor-move {
  0% {
    transform: translate(-20vw, -10vh) rotate(25deg);
    opacity: 0;
  }
  10% { opacity: 1; }
  60% { opacity: 1; }
  100% {
    transform: translate(120vw, 60vh) rotate(25deg);
    opacity: 0;
  }
}

/* Different lanes + timing */
.m1 { animation-delay: 0s; }
.m2 { animation-delay: 1.4s; }
.m3 { animation-delay: 2.8s; }



/* =========================
   ‚ú® Celestial Dust
   ========================= */
.stardust {
  position: absolute; inset: -10% -10%;
  pointer-events: none; z-index: -2;
  background:
    radial-gradient(1px 1px at 5% 20%,  rgba(255,255,255,.7) 60%, transparent 61%),
    radial-gradient(1px 1px at 18% 75%, rgba(255,255,255,.6) 60%, transparent 61%),
    radial-gradient(1px 1px at 35% 35%, rgba(255,255,255,.55) 60%, transparent 61%),
    radial-gradient(1px 1px at 62% 18%, rgba(255,255,255,.6) 60%, transparent 61%),
    radial-gradient(1px 1px at 78% 60%, rgba(255,255,255,.65) 60%, transparent 61%),
    radial-gradient(1px 1px at 90% 30%, rgba(255,255,255,.55) 60%, transparent 61%);
  background-size: 280px 280px;
  filter: blur(.2px) drop-shadow(0 0 2px rgba(255,255,255,.25));
  opacity: .5;
  animation: dust-drift 40s linear infinite;
  will-change: transform;
}
@keyframes dust-drift {
  0%   { transform: translate3d(0, 0, 0) }
  100% { transform: translate3d(0, -60px, 0) }
}

/* =========================
   üå´ Soft Nebula Sheets
   ========================= */
.nebula {
  position: absolute; inset: -10% -10%;
  pointer-events: none; z-index: -3;
  mix-blend-mode: screen;          /* makes colors add like light */
  filter: blur(50px) saturate(1.1);
  opacity: .5;
  animation: nebula-sway 28s ease-in-out infinite alternate;
}
.n1 {
  background:
    radial-gradient(45% 60% at 25% 50%, rgba(141, 90, 255, .35), transparent 65%),
    radial-gradient(40% 50% at 60% 30%, rgba(0, 200, 255, .30), transparent 65%),
    radial-gradient(35% 45% at 70% 70%, rgba(255, 120, 210, .25), transparent 70%);
}
.n2 {
  animation-duration: 36s;
  background:
    radial-gradient(55% 70% at 35% 25%, rgba(90, 255, 200, .18), transparent 70%),
    radial-gradient(50% 60% at 75% 60%, rgba(255, 190, 120, .16), transparent 70%);
}
@keyframes nebula-sway {
  0%   { transform: translateY(0) translateX(0) scale(1) }
  100% { transform: translateY(20px) translateX(-15px) scale(1.05) }
}

/* =========================
   ‚òÅÔ∏è High Altitude Cloudbank (wide, super soft)
   ========================= */
.cloudbank {
  position: absolute; inset: 0;
  pointer-events: none; z-index: -1;
  opacity: .35;
  background:
    radial-gradient(60% 30% at 50% -10%, rgba(255,255,255,.16), transparent 70%),
    radial-gradient(50% 30% at 20% 0%,  rgba(255,255,255,.10), transparent 70%),
    radial-gradient(50% 30% at 80% 0%,  rgba(255,255,255,.10), transparent 70%);
  filter: blur(30px);
  animation: cloudbank-drift 80s linear infinite;
}
@keyframes cloudbank-drift {
  from { transform: translateX(-4%) }
  to   { transform: translateX(4%)  }
}

/* =========================
   üéö Subtle Film Grain / Space Noise + Vignette
   ========================= */
.space-noise {
  position: absolute; inset: 0; z-index: 0; pointer-events: none;
  opacity: .05;
  background-image:
    repeating-conic-gradient(from 0deg, rgba(255,255,255,.9) 0 1deg, transparent 1deg 2deg);
  mix-blend-mode: soft-light;
  animation: noise-shift 3s steps(6, end) infinite;
}
@keyframes noise-shift {
  from { transform: translate3d(0,0,0) }
  to   { transform: translate3d(1px,0,0) }
}
.vignette {
  position: absolute; inset: 0; pointer-events: none; z-index: 1;
  box-shadow: inset 0 0 180px rgba(0,0,20,.55), inset 0 0 260px rgba(0,0,0,.35);
}

/* =========================
   ‚ú® Optional: tiny sparks behind meteors
   ========================= */
.meteor::before {
  content: "";
  position: absolute;
  left: 0; top: -2px;
  width: 40px; height: 6px;
  background:
    radial-gradient(3px 3px at 10% 50%, rgba(255,255,255,.9), transparent 60%),
    radial-gradient(2px 2px at 30% 40%, rgba(255,255,255,.8), transparent 60%),
    radial-gradient(2px 2px at 55% 60%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(2px 2px at 80% 50%, rgba(255,255,255,.6), transparent 60%);
  filter: blur(0.5px);
  transform: translateX(-30px) rotate(0.01deg);
  animation: spark-fade 0.6s linear infinite;
  opacity: 0.7;
}
/* FILTER BAR */
.filters {
  display: flex;
  align-items: center;
  gap: .5rem;
  margin: .2rem 0 1rem;
}
.filters .spacer { flex: 1; }
.chip {
  border: 1px solid #e5e7eb;
  background: #fff;
  border-radius: 999px;
  padding: .35rem .7rem;
  font-size: .85rem;
  cursor: pointer;
}
.chip.active {
  background: #eef2ff;
  color: #4f46e5;
  border-color: #c7d2fe;
  font-weight: 600;
}
.chip.danger { color: #ef4444; }
.chip.danger:hover { background: #fef2f2; }

/* TASK LINE */
.item.done {
  opacity: .7;
  background: #f8fafc;
}
.scene.dark ~ .wrapper .item.done {
  background: rgba(255,255,255,0.06);
}
.item.done .text {
  text-decoration: line-through;
}

/* checkbox + editing input */
.task {
  display: flex; align-items: center; gap: .6rem; flex: 1;
}
.task input[type="checkbox"] { width: 18px; height: 18px; }

.edit-input {
  flex: 1;
  padding: .5rem .6rem;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  outline: none;
}
.edit-input:focus {
  border-color: #6366f1;
  box-shadow: 0 0 0 3px #eef2ff;
}

/* dark tweaks */
.scene.dark ~ .wrapper .edit-input {
  background: rgba(255,255,255,0.08);
  color: #eaf0ff;
  border-color: #2b2f45;
}




@keyframes spark-fade {
  from { opacity: .7; transform: translateX(-30px) }
  to   { opacity: 0;  transform: translateX(-60px) }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .stardust, .nebula, .cloudbank, .space-noise,
  .meteor::before { animation: none !important; }
}


/* path + shimmer */
@keyframes meteor-fall {
  0%   { transform: translate(-10vw, -15vh) rotate(65deg); opacity: 0; }
  5%   { opacity: 1; }
  60%  { opacity: 1; }
  100% { transform: translate(110vw, 70vh) rotate(65deg); opacity: 0; }
}

/* different lanes + timings */
.m1 { top: -8vh;  left: -12vw; animation-duration: 3.6s; animation-delay: .0s; }
.m2 { top: -20vh; left: -18vw; animation-duration: 4.2s; animation-delay: 1.2s; }
.m3 { top: -30vh; left: -8vw;  animation-duration: 3.9s; animation-delay: 2.4s; }
/* --- Realistic SVG cat positioning + animations --- */
.cat3d {
  position: absolute;
  right: 14px;
  top: -72px;           /* sits above the card edge */
  width: 140px;
  height: 100px;
  z-index: 25;
  pointer-events: none; /* never blocks clicks */
}

/* Make sure the SVG scales nicely */
.cat3d svg { display: block; }

/* Blink animation */
.cat3d .eye {
  transform-box: fill-box;
  transform-origin: center;
  animation: cat-blink 5.5s infinite;
}
@keyframes cat-blink {
  0%, 96%, 100% { transform: scaleY(1); }
  98%           { transform: scaleY(0.06); }
}

/* Tail wag (rotate around base) */
.cat3d .tail {
  transform-box: fill-box;
  transform-origin: 170px 120px; /* near tail root */
  animation: tail-wag 2.8s ease-in-out infinite;
}
@keyframes tail-wag {
  0%,100% { transform: rotate(10deg); }
  50%     { transform: rotate(-7deg); }
}

/* Dark theme tweaks for the cat so it doesn‚Äôt vanish */
.scene.dark ~ .wrapper .cat3d .paws circle,
.scene.dark ~ .wrapper .cat3d .head ellipse,
.scene.dark ~ .wrapper .cat3d .tail path {
  /* keep as-is; colors already high-contrast on dark */
}
/* Optional: brighten eyes slightly in dark mode */
.scene.dark ~ .wrapper .cat3d .eye circle:first-child {
  filter: drop-shadow(0 0 6px rgba(255,255,255,.8));
}
/* --- RESPONSIVE CARD LAYOUT --- */
@media (max-width: 600px) {
  .wrapper {
    margin: 2.5rem auto;
    padding: 0.7rem;
  }

  .card {
    padding: 1rem;
    border-radius: 14px;
  }

  .title h1 {
    font-size: 1.4rem;
  }

  .title .badge {
    font-size: 0.75rem;
    padding: 0.1rem 0.45rem;
  }
}
@media (max-width: 600px) {
  .controls {
    grid-template-columns: 1fr auto;
    gap: 0.4rem;
  }

  input {
    padding: 0.6rem 0.8rem;
    font-size: 0.9rem;
  }

  .btn {
    padding: 0.6rem 0.9rem;
    font-size: 0.9rem;
  }
}
.cat3d {
  position: absolute;
  right: 10px;
  top: -60px;
  width: 26vw;
  max-width: 140px;
  min-width: 90px;   /* ensure it doesn't become too tiny */
  height: auto;
}

@media (max-width: 600px) {
  .aurora {
    filter: blur(40px);
  }
  .planet {
    transform: scale(0.7);
  }
  .moon {
    transform: scale(0.75);
  }
  .cloud {
    transform: scale(0.8);
  }
}
@media (max-width: 600px) {
  .meteor {
    height: 80px;    /* reduce tail */
    width: 1.5px;
  }
}
.wrapper {
  width: 90%;
  max-width: 560px;
  margin-left: auto;
  margin-right: auto;
}
@media (max-width: 600px) {
  .topbar {
    right: 8px;
    top: 8px;
  }
  .toggle {
    padding: 0.45rem 0.7rem;
    font-size: 0.8rem;
  }
}

/* Music controls */
.music-controls { margin-top: 1rem; border-top: 1px dashed rgba(0,0,0,0.06); padding-top: 0.85rem; }
.music-controls label { display:block; font-size: .85rem; color: #6b7280; margin-bottom: .4rem; }
.music-row { display:flex; gap: .5rem; align-items: center; }
.music-row input[type="text"] { flex: 1; }
.music-controls .muted { display:block; margin-top: .4rem; color: #9ca3af; font-size: .8rem; }
.scene.dark ~ .wrapper .music-controls label, .scene.dark ~ .wrapper .music-controls .muted { color: #9aa3c7; }
